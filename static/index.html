<html>

<head>
    <link rel="stylesheet"
          href="//cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <link rel="stylesheet"
          href="lib/leaflet-draw/leaflet.draw.css" />
    <link rel="stylesheet"
          href="lib/leaflet.label.css" />
    <link rel="stylesheet"
          href="lib/L.Control.ZoomMin.css" />
    <link rel="stylesheet" href="lib/Control.FullScreen.css" />
    <link rel="stylesheet" href="lib/MiniMap/Control.MiniMap.css" />
          <!--<script src="//cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>-->
    <script src="lib/leaflet/leaflet-src.js"></script>
    <script src="lib/leaflet-draw/leaflet.draw-src.js"></script>
    <script src="lib/leaflet.label-src.js"></script>
    <script src="lib/L.Control.ZoomMin.js"></script>
    <script src="lib/Control.FullScreen.js"></script>
    <script src="lib/MiniMap/Control.MiniMap.js"></script>
    <!--<script src="Leaflet.CanvasLayer/leaflet_canvas_layer.js"></script>-->
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/fabric.js/1.4.0/fabric.min.js"></script>-->
    <script src="lib/fabric/fabric.js"></script>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="lib/spin.min.js"></script>
    <script src="leaflet.spin.js"></script>
    <script src="SliderControl.js"></script>
    <script src="leaflet.omero.js"></script>
    <script src="viewer.js"></script>
    <style>
        #map {
            height: 500px;
            width: 1000px;
        }
        a.leaflet-draw-color-linecolor,
        a.leaflet-draw-color-linecolor:hover {
            /* TODO: should set the background color on initialization */
            background-color: blue;
            background-position: -2px -2px;
        }
        a.leaflet-draw-color-fillcolor,
        a.leaflet-draw-color-fillcolor:hover {
            /* TODO: should set the background color on initialization */
            background-color: blue;
            background-position: -62px -2px;
        }
    </style>
    <script>
$(document).ready(function() {

    map = Viewer.initialize('map', {
        width: 921600,
        height: 380928,
        minZoom: 2,
        maxZoom: 12,
        zoomReverse: true,
        attributionControl: false,
        url: 'http://v.jcb-dataviewer.glencoesoftware.com/webclient/' +
        'render_image_region/201/0/0/?c=1|0:255$FF0000&m=g&p=normal&ia=0&' +
        'q=0.9&zm=100&x=0&y=0&tile={z},{x},{y},256,256'
    });

    drawControl = new L.Control.ROIDraw();
    map.addControl(drawControl);
    drawControl.initROI('[]');

    $("#list-shapes").on('click', function () {
        $("#shapes").text(drawControl.saveAsROI());
    });

    $("#load-shapes").on('click', function () {
        drawControl.loadFromROI($("#shapes").text());
        return;
    });
});
    </script>
</head>

<body>
    <div id="map">
    </div>

    <div>
        <button id="list-shapes">List shapes</button>
        <button id="load-shapes">Load shapes</button>
    </div>

    <textarea id="shapes" style="width: 900px; height: 200px;">
    </textarea>
</body>

</html>
